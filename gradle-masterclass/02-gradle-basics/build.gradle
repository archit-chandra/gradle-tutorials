// define the task graph
defaultTasks 'doFinish'

task doStartProcess{
    doLast {
        logger.info "$name : Now starting the process - OK"
    }
}

task doStep2{
    doLast {
        logger.info "$name : Performed - OK"
    }
}

// doStep2 will not run twice
// Tasks to be executed: [task ':doStartProcess', task ':doStep2', task ':doSomethingInTheMiddle', task ':doFinish']
task doSomethingInTheMiddle(dependsOn: ['doStartProcess', 'doStep2']){
    doLast {
        logger.info "$name : Performed the middle step - OK"
    }
}

// when depending upon two tasks, those two tasks will run in the order they are defined
task doFinish(dependsOn: ['doSomethingInTheMiddle', 'doStep2']){
    doLast {
        logger.info "$name : Done - OK"
    }
}